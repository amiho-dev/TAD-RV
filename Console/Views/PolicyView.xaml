<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PolicyView.xaml â€” Visual policy editor with live JSON preview
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<UserControl x:Class="TadConsole.Views.PolicyView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="{StaticResource PrimaryBrush}">

    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="32,28">
        <StackPanel MaxWidth="900">

            <!-- Page Header -->
            <TextBlock Text="Policy Editor"
                       Style="{StaticResource SectionHeader}"
                       FontSize="24" Margin="0,0,0,4" />
            <TextBlock Text="Configure TAD.RV enforcement policy"
                       Foreground="{StaticResource TextSecondaryBrush}"
                       FontSize="13" Margin="0,0,0,24" />

            <!-- â”€â”€ Two-Column Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="16" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Left Column â€” Policy Settings -->
                <StackPanel Grid.Column="0">

                    <!-- Policy Flags Card -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                <TextBlock Text="Policy Flags"
                                           FontSize="15" FontWeight="SemiBold"
                                           Foreground="{StaticResource TextPrimaryBrush}" />
                                <TextBlock Text="{Binding ComputedFlagsValue, StringFormat='(0x{0:X2})'}"
                                           Foreground="{StaticResource TextSecondaryBrush}"
                                           FontSize="12" Margin="10,3,0,0"
                                           VerticalAlignment="Center" />
                            </StackPanel>

                            <CheckBox Style="{StaticResource ModernCheckBox}"
                                      Content="Block USB Storage (0x01)"
                                      IsChecked="{Binding Policy.BlockUsb}"
                                      Margin="0,0,0,10" />
                            <CheckBox Style="{StaticResource ModernCheckBox}"
                                      Content="Block Printing (0x02)"
                                      IsChecked="{Binding Policy.BlockPrinting}"
                                      Margin="0,0,0,10" />
                            <CheckBox Style="{StaticResource ModernCheckBox}"
                                      Content="Log Screenshots (0x04)"
                                      IsChecked="{Binding Policy.LogScreenshots}"
                                      Margin="0,0,0,10" />
                            <CheckBox Style="{StaticResource ModernCheckBox}"
                                      Content="Block Task Manager (0x08)"
                                      IsChecked="{Binding Policy.BlockTaskManager}"
                                      Margin="0,0,0,10" />
                            <CheckBox Style="{StaticResource ModernCheckBox}"
                                      Content="Enforce Web Filter (0x10)"
                                      IsChecked="{Binding Policy.EnforceWebFilter}" />
                        </StackPanel>
                    </Border>

                    <!-- Heartbeat Settings -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="Heartbeat Settings"
                                       FontSize="15" FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       Margin="0,0,0,12" />

                            <TextBlock Text="Version"
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       FontSize="12" Margin="0,0,0,4" />
                            <TextBox Style="{StaticResource ModernTextBox}"
                                     Text="{Binding Policy.Version, UpdateSourceTrigger=PropertyChanged}"
                                     Margin="0,0,0,12" />

                            <TextBlock Text="Heartbeat Interval (ms)"
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       FontSize="12" Margin="0,0,0,4" />
                            <TextBox Style="{StaticResource ModernTextBox}"
                                     Text="{Binding Policy.HeartbeatIntervalMs, UpdateSourceTrigger=PropertyChanged}"
                                     Margin="0,0,0,12" />

                            <TextBlock Text="Heartbeat Timeout (ms)"
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       FontSize="12" Margin="0,0,0,4" />
                            <TextBox Style="{StaticResource ModernTextBox}"
                                     Text="{Binding Policy.HeartbeatTimeoutMs, UpdateSourceTrigger=PropertyChanged}" />
                        </StackPanel>
                    </Border>

                    <!-- Group Mappings -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="AD Group â†’ Role Mappings"
                                       FontSize="15" FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       Margin="0,0,0,4" />
                            <TextBlock Text="Format: GroupName = Student|Teacher|Admin"
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       FontSize="11" Margin="0,0,0,8" />
                            <TextBox Style="{StaticResource ModernTextBox}"
                                     Text="{Binding Policy.GroupMappings, UpdateSourceTrigger=PropertyChanged}"
                                     AcceptsReturn="True"
                                     TextWrapping="Wrap"
                                     Height="120"
                                     VerticalScrollBarVisibility="Auto"
                                     FontFamily="{StaticResource MonoFont}" FontSize="12" />
                        </StackPanel>
                    </Border>

                    <!-- Blocked Applications -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="Blocked Applications"
                                       FontSize="15" FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       Margin="0,0,0,4" />
                            <TextBlock Text="One executable per line"
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       FontSize="11" Margin="0,0,0,8" />
                            <TextBox Style="{StaticResource ModernTextBox}"
                                     Text="{Binding Policy.BlockedApps, UpdateSourceTrigger=PropertyChanged}"
                                     AcceptsReturn="True"
                                     TextWrapping="Wrap"
                                     Height="100"
                                     VerticalScrollBarVisibility="Auto"
                                     FontFamily="{StaticResource MonoFont}" FontSize="12" />
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Right Column â€” JSON Preview + Actions -->
                <StackPanel Grid.Column="2">

                    <!-- JSON Preview -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="Live JSON Preview"
                                       FontSize="15" FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       Margin="0,0,0,12" />
                            <Border CornerRadius="6" ClipToBounds="True">
                                <TextBox Style="{StaticResource LogTextBox}"
                                         Text="{Binding JsonPreview, Mode=OneWay}"
                                         Height="380"
                                         Foreground="#56B6C2" />
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- Actions -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="Actions"
                                       FontSize="15" FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       Margin="0,0,0,16" />

                            <Button Content="ðŸ“¥  Load from Registry"
                                    Style="{StaticResource PrimaryButton}"
                                    Command="{Binding LoadFromRegistryCommand}"
                                    HorizontalAlignment="Stretch" Margin="0,0,0,8" />

                            <Button Content="ðŸ’¾  Save to Registry"
                                    Style="{StaticResource SuccessButton}"
                                    Command="{Binding SaveToRegistryCommand}"
                                    HorizontalAlignment="Stretch" Margin="0,0,0,8" />

                            <Button Content="ðŸ“¤  Export as JSON File"
                                    Style="{StaticResource PrimaryButton}"
                                    Command="{Binding ExportJsonCommand}"
                                    HorizontalAlignment="Stretch" Margin="0,0,0,8" />

                            <Button Content="ðŸ“‚  Import JSON File"
                                    Style="{StaticResource PrimaryButton}"
                                    Command="{Binding ImportJsonCommand}"
                                    HorizontalAlignment="Stretch" Margin="0,0,0,16" />

                            <Border Height="1" Background="{StaticResource BorderBrush}"
                                    Margin="0,0,0,16" />

                            <Button Content="âš   Reset Provisioning"
                                    Style="{StaticResource DangerButton}"
                                    Command="{Binding ResetProvisioningCommand}"
                                    HorizontalAlignment="Stretch" />
                        </StackPanel>
                    </Border>

                    <!-- Status -->
                    <TextBlock Text="{Binding StatusText}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontSize="12" Margin="0,4,0,0"
                               TextWrapping="Wrap" />
                </StackPanel>
            </Grid>

        </StackPanel>
    </ScrollViewer>
</UserControl>
